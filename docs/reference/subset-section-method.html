<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Subset a Section Object — subset,section-method • oce</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Subset a Section Object — subset,section-method" />
<meta property="og:description" content="Return a subset of a section object." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/oce.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/subclassing.html">6. Subclassing oce objects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dankelley/oce/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Subset a Section Object</h1>
    <small class="dont-index">Source: <a href='https://github.com/dankelley/oce/blob/master/R/section.R'><code>R/section.R</code></a></small>
    <div class="hidden name"><code>subset-section-method.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Return a subset of a section object.</p>
    </div>

    <pre class="usage"><span class='co'># S4 method for section</span>
<span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>subset</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a <a href='section-class.html'>section</a> object.</p></td>
    </tr>
    <tr>
      <th>subset</th>
      <td><p>an optional indication of either the stations to be kept,
or the data to be kept within the stations.  See &#8220;Details&#8221;.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>optional arguments, of which only the first is examined. The
possibilities for this argument are <code>indices</code>, which must be a
vector of station indices (see Example 6), or <code>within</code>, which must be
a list or data frame, containing items named either <code>x</code> and <code>y</code>
or <code>longitude</code> and <code>latitude</code> (see Example 7). If <code>within</code>
is given, then <code>subset</code> is ignored.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <a href='section-class.html'>section</a> object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is used to subset data within the
stations of a section, or to choose a subset of the stations
themselves. The first case is handled with the <code>subset</code> argument,
while the second is handled if <code>...</code> contains a vector named
<code>indices</code>. Either <code>subset</code> or <code>indices</code> must be
provided, but not both.</p>
<p><strong>In the "subset" method</strong>, <code>subset</code> indicates
either stations to be kept, or data to be kept within the stations.</p>
<p>The first step in processing is to check for the presence of certain
key words in the <code>subset</code> expression. If <code>distance</code>
is present, then stations are selected according to a condition on the
distance (in km) from the first station to the given station (Example 1).
If either <code>longitude</code> or <code>latitude</code> is given, then
stations are selected according to the stated condition (Example 2).
If <code>stationId</code> is present, then selection is in terms of the
station ID (not the sequence number) is used (Example 3). In all of these
cases, stations are either selected in their entirety or dropped
in their entirety.</p>
<p>If none of these keywords is present, then the <code>subset</code> expression is
evaluated in the context of the <code>data</code> slot of each of the CTD stations
stored within <code>x</code>. (Note that this slot does not normally
contain any of the keywords that are listed in the previous
paragraph; it does, then odd results may occur.) Each station is examined
in turn, with <code>subset</code> being evaluated individually in each. The evaluation
produces a logical vector. If that vector has length 1 (Examples 4 and 5)
then the station is retained or discarded, accordingly. If the vector is longer,
then the logical vector is used as a sieve to subsample that individual CTD
profile.</p>
<p><strong>In the "indices" method</strong>, stations are selected using
<code>indices</code>, which may be a vector of integers that indicate sequence
number, or a logical vector, again indicating which stations to keep.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other functions that subset oce objects: 
<code><a href='subset,adp-method.html'>subset,adp-method</a></code>,
<code><a href='subset,adv-method.html'>subset,adv-method</a></code>,
<code><a href='subset,amsr-method.html'>subset,amsr-method</a></code>,
<code><a href='subset,argo-method.html'>subset,argo-method</a></code>,
<code><a href='subset,cm-method.html'>subset,cm-method</a></code>,
<code><a href='subset,coastline-method.html'>subset,coastline-method</a></code>,
<code><a href='subset,ctd-method.html'>subset,ctd-method</a></code>,
<code><a href='subset,echosounder-method.html'>subset,echosounder-method</a></code>,
<code><a href='subset,lobo-method.html'>subset,lobo-method</a></code>,
<code><a href='subset,met-method.html'>subset,met-method</a></code>,
<code><a href='subset,oce-method.html'>subset,oce-method</a></code>,
<code><a href='subset,odf-method.html'>subset,odf-method</a></code>,
<code><a href='subset,rsk-method.html'>subset,rsk-method</a></code>,
<code><a href='subset,sealevel-method.html'>subset,sealevel-method</a></code>,
<code><a href='subset,topo-method.html'>subset,topo-method</a></code>,
<code><a href='subset,xbt-method.html'>subset,xbt-method</a></code></p>
<p>Other things related to section data: 
<code><a href='[[,section-method.html'>[[,section-method</a></code>,
<code>[[&lt;-,section-method</code>,
<code><a href='as.section.html'>as.section</a>()</code>,
<code><a href='handleFlags,section-method.html'>handleFlags,section-method</a></code>,
<code><a href='initializeFlagScheme,section-method.html'>initializeFlagScheme,section-method</a></code>,
<code><a href='plot,section-method.html'>plot,section-method</a></code>,
<code><a href='read.section.html'>read.section</a>()</code>,
<code><a href='section-class.html'>section-class</a></code>,
<code><a href='sectionAddStation.html'>sectionAddStation</a>()</code>,
<code><a href='sectionGrid.html'>sectionGrid</a>()</code>,
<code><a href='sectionSmooth.html'>sectionSmooth</a>()</code>,
<code><a href='sectionSort.html'>sectionSort</a>()</code>,
<code><a href='section.html'>section</a></code>,
<code><a href='summary,section-method.html'>summary,section-method</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Dan Kelley</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dankelley.github.io/oce/'>oce</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>section</span><span class='op'>)</span>

<span class='co'># Example 1. Stations within 500 km of the first station</span>
<span class='va'>starting</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>section</span>, <span class='va'>distance</span> <span class='op'>&lt;</span> <span class='fl'>500</span><span class='op'>)</span>

<span class='co'># Example 2. Stations east of 50W</span>
<span class='va'>east</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>section</span>, <span class='va'>longitude</span> <span class='op'>&gt;</span> <span class='op'>(</span><span class='op'>-</span><span class='fl'>50</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Example 3. Gulf Stream</span>
<span class='va'>GS</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>section</span>, <span class='fl'>109</span> <span class='op'>&lt;=</span> <span class='va'>stationId</span> <span class='op'>&amp;</span> <span class='va'>stationId</span> <span class='op'>&lt;=</span> <span class='fl'>129</span><span class='op'>)</span>

<span class='co'># Example 4. Only stations with more than 5 pressure levels</span>
<span class='va'>long</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>section</span>, <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>pressure</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>5</span><span class='op'>)</span>

<span class='co'># Example 5. Only stations that have some data in top 50 dbar</span>
<span class='va'>surfacing</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>section</span>, <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>pressure</span><span class='op'>)</span> <span class='op'>&lt;</span> <span class='fl'>50</span><span class='op'>)</span>

<span class='co'># Example 6. Similar to #4, but done in more detailed way</span>
<span class='va'>long</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>section</span>,
   indices<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>section</span><span class='op'>[[</span><span class='st'>"station"</span><span class='op'>]</span><span class='op'>]</span>,
                  <span class='kw'>function</span><span class='op'>(</span><span class='va'>s</span><span class='op'>)</span>
                    <span class='fl'>5</span> <span class='op'>&lt;</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>s</span><span class='op'>[[</span><span class='st'>"pressure"</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Example 7. Subset by a polygon determined with locator()</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>section</span>, which<span class='op'>=</span><span class='st'>"map"</span><span class='op'>)</span>
<span class='va'>bdy</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/graphics/locator.html'>locator</a></span><span class='op'>(</span><span class='fl'>4</span><span class='op'>)</span> <span class='co'># choose a polygon near N. America</span>
<span class='va'>GS</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>section</span>, within<span class='op'>=</span><span class='va'>bdy</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>GS</span>, which<span class='op'>=</span><span class='st'>"map"</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


