<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read a met File — read.met • oce</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read a met File — read.met" />
<meta property="og:description" content="Reads some meteorological file formats used by the Environment
Canada (see reference 1).  Since the agency does not publish the
data formats, this function had to be based on some sample files, and it
is likely to fail if Environment Canada changes their file format. For
example, a change was required in October 2019, to accommodate changes
to the file format noticed at that time (see the notes on the type argument)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">oce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/oce.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/adp.html">3. Analysis of acoustic-Doppler data</a>
    </li>
    <li>
      <a href="../articles/ctd.html">2. Analysis of CTD data</a>
    </li>
    <li>
      <a href="../articles/flags.html">5. Dealing with data-quality flags</a>
    </li>
    <li>
      <a href="../articles/map_projections.html">4. Using map projections</a>
    </li>
    <li>
      <a href="../articles/subclassing.html">6. Subclassing oce objects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dankelley/oce/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read a met File</h1>
    <small class="dont-index">Source: <a href='https://github.com/dankelley/oce/blob/master/R/met.R'><code>R/met.R</code></a></small>
    <div class="hidden name"><code>read.met.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Reads some meteorological file formats used by the Environment
Canada (see reference 1).  Since the agency does not publish the
data formats, this function had to be based on some sample files, and it
is likely to fail if Environment Canada changes their file format. For
example, a change was required in October 2019, to accommodate changes
to the file format noticed at that time (see the notes on the <code>type</code> argument).</p>
    </div>

    <pre class="usage"><span class='fu'>read.met</span><span class='op'>(</span>
  <span class='va'>file</span>,
  type <span class='op'>=</span> <span class='cn'>NULL</span>,
  skip <span class='op'>=</span> <span class='cn'>NULL</span>,
  tz <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"oceTz"</span><span class='op'>)</span>,
  debug <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"oceDebug"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>file</th>
      <td><p>a character string naming a file that holds met data.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>if <code>NULL</code>, which is the default, then an attempt is
made to infer the type from the file contents. If this fails, it
will be necessary for the user to provide a value for the <code>type</code>
argument.  The permitted choices are: (a) <code>"csv"</code> or <code>"csv1"</code> for an
old CSV format no longer provided as of October 2019,
(b) <code>"csv2"</code> for a CSV format noticed on the Environment Canada
website in October 2019 (but note that the paired metadata file
is ignored), and (c) <code>"xml2"</code> for an XML format that was noticed
on the Environment Canada website in October 2019.</p></td>
    </tr>
    <tr>
      <th>skip</th>
      <td><p>number of lines of header that occur before the actual
data.  This is ignored unless <code>type</code> is <code>"csv"</code> or <code>"csv1"</code>, in which case
a non-<code>NULL</code> value of <code>skip</code> is taken as the number of lines preceding
the columnar data ... and this is only needed if <code>read.met()</code> cannot
find a line starting with <code>"Date/Time"</code>.</p></td>
    </tr>
    <tr>
      <th>tz</th>
      <td><p>timezone assumed for time data</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>a flag that turns on debugging.  Set to 1 to get a moderate
amount of debugging information, or to 2 to get more.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <a href='met-class.html'>met</a> object.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ol>
<li><p>Environment Canada website for Historical Climate Data
<code>https://climate.weather.gc.ca/index_e.html</code></p></li>
</ol>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other things related to met data: 
<code><a href='[[,met-method.html'>[[,met-method</a></code>,
<code>[[&lt;-,met-method</code>,
<code><a href='as.met.html'>as.met</a>()</code>,
<code><a href='download.met.html'>download.met</a>()</code>,
<code><a href='met-class.html'>met-class</a></code>,
<code><a href='met.html'>met</a></code>,
<code><a href='plot,met-method.html'>plot,met-method</a></code>,
<code><a href='subset,met-method.html'>subset,met-method</a></code>,
<code><a href='summary,met-method.html'>summary,met-method</a></code>,
<code><a href='test_met_csv1.csv.html'>test_met_csv1.csv</a></code>,
<code><a href='test_met_csv2.csv.html'>test_met_csv2.csv</a></code>,
<code><a href='test_met_xml2.xml.html'>test_met_xml2.xml</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Dan Kelley</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># The old csv format (no longer supplied by Environment Canada as of Oct 2019)</span>
<span class='va'>csv1</span> <span class='op'>&lt;-</span> <span class='fu'>read.met</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"test_met_vsn1.csv"</span>, package<span class='op'>=</span><span class='st'>"oce"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># The new "csv2" format (provided by Environment Canada as of Oct 2019)</span>
<span class='va'>csv2</span> <span class='op'>&lt;-</span> <span class='fu'>read.met</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"test_met_vsn2.csv"</span>, package<span class='op'>=</span><span class='st'>"oce"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># "xml2" format</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"XML"</span>, quietly<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
    <span class='va'>xml2</span> <span class='op'>&lt;-</span> <span class='fu'>read.met</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"test_met_xml2.xml"</span>, package<span class='op'>=</span><span class='st'>"oce"</span><span class='op'>)</span><span class='op'>)</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dankelley.github.io/oce/'>oce</a></span><span class='op'>)</span>
<span class='co'># Recreate data(met) and plot u(t) and v(t)</span>
<span class='va'>metFile</span> <span class='op'>&lt;-</span> <span class='fu'><a href='download.met.html'>download.met</a></span><span class='op'>(</span>id<span class='op'>=</span><span class='fl'>6358</span>, year<span class='op'>=</span><span class='fl'>2003</span>, month<span class='op'>=</span><span class='fl'>9</span>, destdir<span class='op'>=</span><span class='st'>"."</span><span class='op'>)</span>
<span class='va'>met</span> <span class='op'>&lt;-</span> <span class='fu'>read.met</span><span class='op'>(</span><span class='va'>metFile</span><span class='op'>)</span>
<span class='va'>met</span> <span class='op'>&lt;-</span> <span class='fu'><a href='oceSetData.html'>oceSetData</a></span><span class='op'>(</span><span class='va'>met</span>, <span class='st'>"time"</span>, <span class='va'>met</span><span class='op'>[[</span><span class='st'>"time"</span><span class='op'>]</span><span class='op'>]</span><span class='op'>+</span><span class='fl'>4</span><span class='op'>*</span><span class='fl'>3600</span>,
                  note<span class='op'>=</span><span class='st'>"add 4h to local time to get UTC time"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>met</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dan Kelley, Clark Richards.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


